### 量子五目並べ (Quantum Gomoku) 仕様書

**1. 概要**
通常の五目並べのルールをベースに、石が「観測」されるまで確率的な状態を持つ、ユニークなゲーム。

**2. 盤面**
*   11x11の交点を持つ盤面。
*   デバイスの画面サイズに合わせて、盤面全体がバランスを保ちつつ、可能な限り大きく表示されるように自動調整される。
*   石の大きさも盤面サイズに合わせて自動調整される。

**3. 石の種類と手番**
*   **先手 (黒):**
    *   1手目: 観測すると黒になる確率が90%の石
    *   2手目: 観測すると黒になる確率が70%の石
    *   以降、90%と70%の石を交互に打つ。
*   **後手 (白):**
    *   1手目: 観測すると黒になる確率が10%の石
    *   2手目: 観測すると黒になる確率が30%の石
    *   以降、10%と30%の石を交互に打つ。
*   石は空いている交点にのみ置ける。

**4. 石の見た目 (観測前)**
*   **黒90%の石:** 真っ黒な石に「90」と書かれている (文字色は白)。
*   **黒70%の石:** 濃いグレーの石に「70」と書かれている (文字色は白)。
*   **白10%の石:** 真っ白な石に「10」と書かれている (文字色は黒)。
*   **白30%の石:** 少し霞んだ白い石に「30」と書かれている (文字色は黒)。

**5. 観測機能**
*   **観測の権利:** 自分の石を打った後、プレイヤーは「観測」する権利を持つ。
*   **「観測」ボタン:** 常に表示されている。
*   **観測の実行:** 「観測」ボタンを押下すると、盤面上の**全ての石**が、それぞれの確率に基づいて「黒」または「白」に確定する。
*   **観測時の盤面表示:**
    *   盤面の色が木目調 (#deb887) に変更され、線は黒色になる。
    *   石は、確定した色（真っ黒または真っ白）で表示され、確率の数字は非表示になる。
*   **観測後の勝利判定:**
    *   観測画面に切り替わってから3秒後に、勝利判定が行われる。
    *   黒または白の石が縦、横、斜めのいずれかに5個以上並んだ場合、その色のプレイヤーの勝利。
    *   黒と白の両方が5個以上並んでいた場合、**観測を宣言したプレイヤー**（直前に石を打ったプレイヤー）の勝利。
*   **観測後のゲーム継続:**
    *   観測後、どちらのプレイヤーも勝利条件を満たさなかった場合、「戻る」ボタンを押して観測前の状態に戻り、次のプレイヤーのターンとしてゲームを再開する。
    *   「観測」ボタンを押さずに次の手が打たれた場合、観測は行われなかったものとみなされる。

**6. ボタンの挙動**
*   **「観測」ボタン:**
    *   観測前: 「観測」と表示。押下で観測実行。
    *   観測後: 「戻る」と表示。押下で観測前の状態に戻る。
*   **「リセット」ボタン:** ゲームを初期状態に戻す。
*   **「最初へ戻る」ボタン (ゲームオーバー時のみ):** ゲームを初期状態に戻す。

**7. ゲーム終了**
*   勝利条件が満たされた場合、ゲーム終了。
*   勝利確定メッセージボックスが表示された場合、「最初へ戻る」ボタンのみが配置される。
